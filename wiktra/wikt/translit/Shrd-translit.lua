local export = {}

local consonants = {["ğ‘†‘"] = "k", ["ğ‘†’"] = "kh", ["ğ‘†“"] = "g", ["ğ‘†”"] = "gh", ["ğ‘†•"] = "á¹…", ["ğ‘†–"] = "c", ["ğ‘†—"] = "ch", ["ğ‘†˜"] = "j", ["ğ‘†™"] = "jh", ["ğ‘†š"] = "Ã±", ["ğ‘†›"] = "á¹­", ["ğ‘†œ"] = "á¹­h", ["ğ‘†"] = "á¸", ["ğ‘†"] = "á¸h", ["ğ‘†Ÿ"] = "á¹‡", ["ğ‘† "] = "t", ["ğ‘†¡"] = "th", ["ğ‘†¢"] = "d", ["ğ‘†£"] = "dh", ["ğ‘†¤"] = "n", ["ğ‘†¥"] = "p", ["ğ‘†¦"] = "ph", ["ğ‘†§"] = "b", ["ğ‘†¨"] = "bh", ["ğ‘†©"] = "m", ["ğ‘†ª"] = "y", ["ğ‘†«"] = "r", ["ğ‘†¬"] = "l", ["ğ‘†®"] = "v", ["ğ‘†­"] = "á¸·", ["ğ‘†¯"] = "Å›", ["ğ‘†°"] = "á¹£", ["ğ‘†±"] = "s", ["ğ‘†²"] = "h"}

local diacritics = {["ğ‘†³"] = "Ä", ["ğ‘†´"] = "i", ["ğ‘†µ"] = "Ä«", ["ğ‘†¶"] = "u", ["ğ‘†·"] = "Å«", ["ğ‘†¸"] = "á¹›", ["ğ‘†¹"] = "á¹", ["ğ‘†º"] = "á¸·", ["ğ‘†»"] = "á¸¹", ["ğ‘†»"] = "e", ["ğ‘†½"] = "ai", ["ğ‘†¾"] = "o", ["ğ‘†¿"] = "au", ["ğ‘‡€"] = ""}

local tt = {
    -- vowels
    ["ğ‘†ƒ"] = "a",
    ["ğ‘†„"] = "Ä",
    ["ğ‘†…"] = "i",
    ["ğ‘††"] = "Ä«",
    ["ğ‘†‡"] = "u",
    ["ğ‘†ˆ"] = "Å«",
    ["ğ‘†‰"] = "á¹›",
    ["ğ‘†Š"] = "á¹",
    ["ğ‘†‹"] = "á¸·",
    ["ğ‘†Œ"] = "á¸¹",
    ["ğ‘†"] = "e",
    ["ğ‘†"] = "ai",
    ["ğ‘†"] = "o",
    ["ğ‘†"] = "au",
    -- chandrabindu    
    ["ğ‘†€"] = "mÌ", -- until a better method is found
    -- anusvara    
    ["ğ‘†"] = "á¹ƒ", -- until a better method is found
    -- visarga    
    ["ğ‘†‚"] = "á¸¥",
    -- avagraha
    ["ğ‘‡"] = "â€™",
    -- numerals
    ["ğ‘‡"] = "0",
    ["ğ‘‡‘"] = "1",
    ["ğ‘‡’"] = "2",
    ["ğ‘‡“"] = "3",
    ["ğ‘‡”"] = "4",
    ["ğ‘‡•"] = "5",
    ["ğ‘‡–"] = "6",
    ["ğ‘‡—"] = "7",
    ["ğ‘‡˜"] = "8",
    ["ğ‘‡™"] = "9",
    -- punctuation        
    ["ğ‘‡†"] = ".", -- double danda
    ["ğ‘‡…"] = ".", -- danda
    -- Vedic extensions
    ["ğ‘‡‚"] = "x",
    ["ğ‘‡ƒ"] = "f",
    -- Om
    ["ğ‘‡„"] = "oá¹ƒ",
    -- reconstructed
    ["*"] = ""
}

function export.tr(text, lang, sc)
    text = mw.ustring.gsub(text, "([ğ‘†‘ğ‘†’ğ‘†“ğ‘†”ğ‘†•ğ‘†–ğ‘†—ğ‘†˜ğ‘†™ğ‘†šğ‘†›ğ‘†œğ‘†ğ‘†ğ‘†Ÿğ‘† ğ‘†¡ğ‘†¢ğ‘†£ğ‘†¤ğ‘†¥ğ‘†¦ğ‘†§ğ‘†¨ğ‘†©ğ‘†ªğ‘†«ğ‘†¬ğ‘†®ğ‘†­ğ‘†¯ğ‘†°ğ‘†±ğ‘†²])" .. "([ğ‘†³ğ‘†´ğ‘†µğ‘†¶ğ‘†·ğ‘†¸ğ‘†¹ğ‘†ºğ‘†»ğ‘†¼ğ‘†½ğ‘†¾ğ‘†¿ğ‘‡€]?)", function(c, d)
        if d == "" then
            return consonants[c] .. "a"
        else
            return consonants[c] .. diacritics[d]
        end
    end)

    text = mw.ustring.gsub(text, ".", tt)

    return text
end

return export
