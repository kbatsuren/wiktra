local export = {}

local consonants = {["ğ‘€“"] = "k", ["ğ‘€”"] = "kh", ["ğ‘€•"] = "g", ["ğ‘€–"] = "gh", ["ğ‘€—"] = "á¹…", ["ğ‘€˜"] = "c", ["ğ‘€™"] = "ch", ["ğ‘€š"] = "j", ["ğ‘€›"] = "jh", ["ğ‘€œ"] = "Ã±", ["ğ‘€"] = "á¹­", ["ğ‘€"] = "á¹­h", ["ğ‘€Ÿ"] = "á¸", ["ğ‘€ "] = "á¸h", ["ğ‘€¡"] = "á¹‡", ["ğ‘€¢"] = "t", ["ğ‘€£"] = "th", ["ğ‘€¤"] = "d", ["ğ‘€¥"] = "dh", ["ğ‘€¦"] = "n", ["ğ‘€§"] = "p", ["ğ‘€¨"] = "ph", ["ğ‘€©"] = "b", ["ğ‘€ª"] = "bh", ["ğ‘€«"] = "m", ["ğ‘€¬"] = "y", ["ğ‘€­"] = "r", ["ğ‘€®"] = "l", ["ğ‘€¯"] = "v", ["ğ‘€´"] = "á¸·", ["ğ‘€°"] = "Å›", ["ğ‘€±"] = "á¹£", ["ğ‘€²"] = "s", ["ğ‘€³"] = "h"}

local diacritics = {["ğ‘€¸"] = "Ä", ["ğ‘€º"] = "i", ["ğ‘€»"] = "Ä«", ["ğ‘€¼"] = "u", ["ğ‘€½"] = "Å«", ["ğ‘€¾"] = "á¹›", ["ğ‘€¿"] = "á¹", ["ğ‘€"] = "á¸·", ["ğ‘"] = "á¸¹", ["ğ‘‚"] = "e", ["ğ‘ƒ"] = "ai", ["ğ‘„"] = "o", ["ğ‘…"] = "au", ["ğ‘†"] = ""}

local tt = {
    -- vowels
    ["ğ‘€…"] = "a",
    ["ğ‘€†"] = "Ä",
    ["ğ‘€‡"] = "i",
    ["ğ‘€ˆ"] = "Ä«",
    ["ğ‘€‰"] = "u",
    ["ğ‘€Š"] = "Å«",
    ["ğ‘€‹"] = "á¹›",
    ["ğ‘€Œ"] = "á¹",
    ["ğ‘€"] = "á¸·",
    ["ğ‘€"] = "á¸¹",
    ["ğ‘€"] = "e",
    ["ğ‘€"] = "ai",
    ["ğ‘€‘"] = "o",
    ["ğ‘€’"] = "au",
    -- chandrabindu    
    ["ğ‘€€"] = "mÌ", -- until a better method is found
    -- anusvara    
    ["ğ‘€"] = "á¹ƒ", -- until a better method is found
    -- visarga    
    ["ğ‘€‚"] = "á¸¥",
    -- avagraha
    ["à¤½"] = "â€™",
    -- numerals
    ["ğ‘¦"] = "0",
    ["ğ‘§"] = "1",
    ["ğ‘¨"] = "2",
    ["ğ‘©"] = "3",
    ["ğ‘ª"] = "4",
    ["ğ‘«"] = "5",
    ["ğ‘¬"] = "6",
    ["ğ‘­"] = "7",
    ["ğ‘®"] = "8",
    ["ğ‘¯"] = "9",
    -- punctuation        
    ["ğ‘ˆ"] = ".", -- double danda
    ["ğ‘‡"] = ".", -- danda
    -- Vedic extensions
    ["ğ‘€ƒ"] = "x",
    ["ğ‘€„"] = "f",
    -- Om
    ["ğ‘€‘ğ‘€"] = "oá¹ƒ",
    -- reconstructed
    ["*"] = ""
}

function export.tr(text, lang, sc)
    text = mw.ustring.gsub(text, "([ğ‘€“ğ‘€”ğ‘€•ğ‘€–ğ‘€—ğ‘€˜ğ‘€™ğ‘€šğ‘€›ğ‘€œğ‘€ğ‘€ğ‘€Ÿğ‘€ ğ‘€¡ğ‘€¢ğ‘€£ğ‘€¤ğ‘€¥ğ‘€¦ğ‘€§ğ‘€¨ğ‘€©ğ‘€ªğ‘€«ğ‘€¬ğ‘€­ğ‘€®ğ‘€¯ğ‘€°ğ‘€±ğ‘€²ğ‘€³])" .. "([ğ‘€¸ğ‘€ºğ‘€»ğ‘€¼ğ‘€½ğ‘€¾ğ‘€¿ğ‘€ğ‘ğ‘‚ğ‘ƒğ‘„ğ‘…ğ‘†]?)", function(c, d)
        if d == "" then
            return consonants[c] .. "a"
        else
            return consonants[c] .. diacritics[d]
        end
    end)

    text = mw.ustring.gsub(text, ".", tt)

    return text
end

return export
