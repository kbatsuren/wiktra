local export = {}
local gsub = mw.ustring.gsub
local match = mw.ustring.match

local conv = {

    -- consonants
    ["ЁСТП"] = "рдХ",
    ["ЁСТР"] = "рдЦ",
    ["ЁСТС"] = "рдЧ",
    ["ЁСТТ"] = "рдШ",
    ["ЁСТУ"] = "рдЩ",
    ["ЁСТФ"] = "рдЪ",
    ["ЁСТХ"] = "рдЫ",
    ["ЁСТЦ"] = "рдЬ",
    ["ЁСТЧ"] = "рдЭ",
    ["ЁСТШ"] = "рдЮ",
    ["ЁСТЩ"] = "рдЯ",
    ["ЁСТЪ"] = "рда",
    ["ЁСТЫ"] = "рдб",
    ["ЁСТЬ"] = "рдв",
    ["ЁСТЭ"] = "рдг",
    ["ЁСТЮ"] = "рдд",
    ["ЁСТЯ"] = "рде",
    ["ЁСТа"] = "рдж",
    ["ЁСТб"] = "рдз",
    ["ЁСТв"] = "рди",
    ["ЁСТг"] = "рдк",
    ["ЁСТд"] = "рдл",
    ["ЁСТе"] = "рдм",
    ["ЁСТж"] = "рдн",
    ["ЁСТз"] = "рдо",
    ["ЁСТи"] = "рдп",
    ["ЁСТй"] = "рд░",
    ["ЁСТк"] = "рд▓",
    ["ЁСТл"] = "рд╡",
    ["ЁСТкЁСУГ"] = "рд│",
    ["ЁСТм"] = "рд╢",
    ["ЁСТн"] = "рд╖",
    ["ЁСТо"] = "рд╕",
    ["ЁСТп"] = "рд╣",
    ["ЁСТЫЁСУГ"] = "рдбрд╝",
    ["ЁСТЬЁСУГ"] = "рдврд╝",
    ["ЁСУГ"] = "рд╝",
    -- vowel diacritics
    ["ЁСТ▒"] = "рд┐",
    ["ЁСТ│"] = "реБ",
    ["ЁСТ╣"] = "реЗ",
    ["ЁСТ║"] = "реЖ",
    ["ЁСТ╝"] = "реЛ",
    ["ЁСТ╜"] = "реК",
    ["ЁСТ░"] = "рд╛",
    ["ЁСТ▓"] = "реА",
    ["ЁСТ┤"] = "реВ",
    ["ЁСТ╡"] = "реГ",
    ["ЁСТ╢"] = "реД",
    ["ЁСТ╗"] = "реИ",
    ["ЁСТ╛"] = "реМ",
    ["ЁСТ╖"] = "рев",
    ["ЁСТ╕"] = "рег",
    ["реП"] = "реП",
    ["рд║"] = "рд║",
    ["реЕ"] = "реЕ",
    -- vowels
    ["ЁСТБ"] = "рдЕ",
    ["ЁСТВ"] = "рдЖ",
    ["ЁСТГ"] = "рдЗ",
    ["ЁСТД"] = "рдИ",
    ["ЁСТЕ"] = "рдЙ",
    ["ЁСТЖ"] = "рдК",
    ["ЁСТЗ"] = "рдЛ",
    ["ЁСТИ"] = "реа",
    ["ЁСТЙ"] = "рдМ",
    ["ЁСТК"] = "реб",
    ["ЁСТЛ"] = "рдП",
    ["ЁСТМ"] = "рдР",
    ["ЁСТН"] = "рдУ",
    ["ЁСТО"] = "рдФ",

    ["рдО"] = "рдО",
    ["рдТ"] = "рдТ",
    ["рд╡рд╝"] = "рд╡рд╝",
    ["рдпрд╝"] = "рдпрд╝",
    ["ре╡"] = "ре╡",
    ["ре┤"] = "ре┤",
    ["рдН"] = "рдН",
    ["рдЗрд║"] = "рдЗрд║",
    ["рдЙрд║"] = "рдЙрд║",
    ["реи"] = "тАЩ",
    ["рд╜"] = "рд╜",
    -- chandrabindu 
    ["ЁСТ┐"] = "рдБ",
    -- anusvara
    ["ЁСУА"] = "рдВ",
    -- gvang
    ["ЁСУЕ"] = "рдБ",
    -- visarga
    ["ЁСУБ"] = "рдГ",
    -- virama
    ["ЁСУВ"] = "реН",
    -- om
    ["ЁСУЗ"] = "реР",
    -- numerals
    ["ЁСУР"] = "реж",
    ["ЁСУС"] = "рез",
    ["ЁСУТ"] = "реи",
    ["ЁСУУ"] = "рей",
    ["ЁСУФ"] = "рек",
    ["ЁСУХ"] = "рел",
    ["ЁСУЦ"] = "рем",
    ["ЁСУЧ"] = "рен",
    ["ЁСУШ"] = "рео",
    ["ЁСУЩ"] = "реп",
    -- punctuation
    ["ред"] = "ред", -- danda
    ["рее"] = "рее", -- double danda
    ["+"] = "+", -- compound separator
    -- abbreviation sign
    ["ре░"] = "ре░"
}
function export.tr(text, lang, sc)
    text = mw.ustring.gsub(text, ".", function(c) return conv[c] end)
    return text
end

return export
