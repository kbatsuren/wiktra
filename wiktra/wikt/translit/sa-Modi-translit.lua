local export = {}

local consonants = {["ğ‘˜"] = "k", ["ğ‘˜"] = "kh", ["ğ‘˜"] = "g", ["ğ‘˜‘"] = "gh", ["ğ‘˜’"] = "á¹…", ["ğ‘˜“"] = "c", ["ğ‘˜”"] = "ch", ["ğ‘˜•"] = "j", ["ğ‘˜–"] = "jh", ["ğ‘˜—"] = "Ã±", ["ğ‘˜˜"] = "á¹­", ["ğ‘˜™"] = "á¹­h", ["ğ‘˜š"] = "á¸", ["ğ‘˜›"] = "á¸h", ["ğ‘˜œ"] = "á¹‡", ["ğ‘˜"] = "t", ["ğ‘˜"] = "th", ["ğ‘˜Ÿ"] = "d", ["ğ‘˜ "] = "dh", ["ğ‘˜¡"] = "n", ["ğ‘˜¢"] = "p", ["ğ‘˜£"] = "ph", ["ğ‘˜¤"] = "b", ["ğ‘˜¥"] = "bh", ["ğ‘˜¦"] = "m", ["ğ‘˜§"] = "y", ["ğ‘˜¨"] = "r", ["ğ‘˜©"] = "l", ["ğ‘˜ª"] = "v", ["ğ‘˜¯"] = "á¸·", ["ğ‘˜«"] = "Å›", ["ğ‘˜¬"] = "á¹£", ["ğ‘˜­"] = "s", ["ğ‘˜®"] = "h"}

local diacritics = {["ğ‘˜°"] = "Ä", ["ğ‘˜±"] = "i", ["ğ‘˜²"] = "Ä«", ["ğ‘˜³"] = "u", ["ğ‘˜´"] = "Å«", ["ğ‘˜µ"] = "á¹›", ["ğ‘˜¶"] = "á¹", ["ğ‘˜·"] = "á¸·", ["ğ‘˜¸"] = "á¸¹", ["ğ‘˜¹"] = "e", ["ğ‘˜º"] = "ai", ["ğ‘˜»"] = "o", ["ğ‘˜¼"] = "au", ["ğ‘˜¿"] = ""}

local tt = {
    -- vowels
    ["ğ‘˜€"] = "a",
    ["ğ‘˜"] = "Ä",
    ["ğ‘˜‚"] = "i",
    ["ğ‘˜ƒ"] = "Ä«",
    ["ğ‘˜„"] = "u",
    ["ğ‘˜…"] = "Å«",
    ["ğ‘˜†"] = "á¹›",
    ["ğ‘˜‡"] = "á¹",
    ["ğ‘˜ˆ"] = "á¸·",
    ["ğ‘˜‰"] = "á¸¹",
    ["ğ‘˜Š"] = "e",
    ["ğ‘˜‹"] = "ai",
    ["ğ‘˜Œ"] = "o",
    ["ğ‘˜"] = "au",
    -- chandrabindu    
    ["ğ‘™€"] = "mÌ", -- until a better method is found
    -- anusvara    
    ["ğ‘˜½"] = "á¹ƒ", -- until a better method is found
    -- visarga    
    ["ğ‘˜¾"] = "á¸¥",
    -- avagraha
    ["à¤½"] = "â€™",
    -- numerals
    ["ğ‘™"] = "0",
    ["ğ‘™‘"] = "1",
    ["ğ‘™’"] = "2",
    ["ğ‘™“"] = "3",
    ["ğ‘™”"] = "4",
    ["ğ‘™•"] = "5",
    ["ğ‘™–"] = "6",
    ["ğ‘™—"] = "7",
    ["ğ‘™˜"] = "8",
    ["ğ‘™™"] = "9",
    -- punctuation        
    ["ğ‘™‚"] = ".", -- double danda
    ["ğ‘™"] = ".", -- danda
    -- Vedic extensions
    ["á³µ"] = "x",
    ["á³¶"] = "f",
    -- Om
    ["ğ‘˜Œğ‘˜¦ğ‘˜¿"] = "oá¹ƒ",
    -- reconstructed
    ["*"] = ""
}

function export.tr(text, lang, sc)
    text = mw.ustring.gsub(text, "([ğ‘˜ğ‘˜ğ‘˜ğ‘˜‘ğ‘˜’ğ‘˜“ğ‘˜”ğ‘˜•ğ‘˜–ğ‘˜—ğ‘˜˜ğ‘˜™ğ‘˜šğ‘˜›ğ‘˜œğ‘˜ğ‘˜ğ‘˜Ÿğ‘˜ ğ‘˜¡ğ‘˜¢ğ‘˜£ğ‘˜¤ğ‘˜¥ğ‘˜¦ğ‘˜§ğ‘˜¨ğ‘˜©ğ‘˜ªğ‘˜«ğ‘˜¬ğ‘˜­ğ‘˜®ğ‘˜¯])" .. "([ğ‘˜°ğ‘˜±ğ‘˜²ğ‘˜³ğ‘˜´ğ‘˜µğ‘˜¶ğ‘˜·ğ‘˜¸ğ‘˜¹ğ‘˜ºğ‘˜»ğ‘˜¼ğ‘˜¿]?)", function(c, d)
        if d == "" then
            return consonants[c] .. "a"
        else
            return consonants[c] .. diacritics[d]
        end
    end)

    text = mw.ustring.gsub(text, ".", tt)

    return text
end

return export
