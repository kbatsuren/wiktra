local export = {}

local consonants = {["ğ‘˜"] = "k", ["ğ‘˜"] = "kh", ["ğ‘˜"] = "g", ["ğ‘˜‘"] = "gh", ["ğ‘˜’"] = "á¹…", ["ğ‘˜“"] = "c", ["ğ‘˜”"] = "ch", ["ğ‘˜•"] = "j", ["ğ‘˜–"] = "jh", ["ğ‘˜—"] = "Ã±", ["ğ‘˜˜"] = "á¹­", ["ğ‘˜™"] = "á¹­h", ["ğ‘˜š"] = "á¸", ["ğ‘˜›"] = "á¸h", ["ğ‘˜œ"] = "á¹‡", ["ğ‘˜"] = "t", ["ğ‘˜"] = "th", ["ğ‘˜Ÿ"] = "d", ["ğ‘˜ "] = "dh", ["ğ‘˜¡"] = "n", ["ğ‘˜¢"] = "p", ["ğ‘˜£"] = "ph", ["ğ‘˜¤"] = "b", ["ğ‘˜¥"] = "bh", ["ğ‘˜¦"] = "m", ["ğ‘˜§"] = "y", ["ğ‘˜¨"] = "r", ["ğ‘˜©"] = "l", ["ğ‘˜ª"] = "v", ["ğ‘˜¯"] = "á¸·", ["ğ‘˜«"] = "Å›", ["ğ‘˜¬"] = "á¹£", ["ğ‘˜­"] = "s", ["ğ‘˜®"] = "h"}

local diacritics = {
    ["ğ‘˜°"] = "Ä",
    ["ğ‘˜±"] = "i",
    ["ğ‘˜²"] = "Ä«",
    ["ğ‘˜³"] = "u",
    ["ğ‘˜´"] = "Å«",
    ["ğ‘˜µ"] = "á¹›",
    ["ğ‘˜¶"] = "á¹",
    ["ğ‘˜·"] = "á¸·",
    ["ğ‘˜¸"] = "á¸¹",
    ["ğ‘˜¹"] = "e",
    ["ğ‘˜º"] = "ai",
    ["ğ‘˜»"] = "o",
    ["ğ‘˜¼"] = "au",
    -- virama
    ["ğ‘˜¿"] = ""
}

local tt = {
    -- vowel signs
    ["ğ‘˜€"] = "a",
    ["ğ‘˜‚"] = "i",
    ["ğ‘˜„"] = "u",
    ["ğ‘˜Š"] = "e",
    ["ğ‘˜Œ"] = "o",
    ["ğ‘˜"] = "Ä",
    ["ğ‘˜ƒ"] = "Ä«",
    ["ğ‘˜…"] = "Å«",
    ["ğ‘˜†"] = "Å•",
    ["ğ‘˜‹"] = "ai",
    ["ğ‘˜"] = "au",
    ["ğ‘˜ğ‘™€"] = "Å",
    ["ğ‘˜€ğ‘™€"] = "Ä•",
    ["ğ‘˜Šğ‘™€"] = "Ä•",
    -- anusvara
    ["ğ‘˜½"] = "á¹ƒ",
    -- visarga
    ["ğ‘˜¾"] = "á¸¥",
    -- numerals
    ["ğ‘™"] = "0",
    ["ğ‘™‘"] = "1",
    ["ğ‘™’"] = "2",
    ["ğ‘™“"] = "3",
    ["ğ‘™”"] = "4",
    ["ğ‘™•"] = "5",
    ["ğ‘™–"] = "6",
    ["ğ‘™—"] = "7",
    ["ğ‘™˜"] = "8",
    ["ğ‘™™"] = "9",
    -- punctuation        
    ["ğ‘™"] = ".", -- danda
    ["ğ‘™‚"] = ".", -- double danda
    ["+"] = "", -- compound separator

    -- abbreviation sign
    ["ğ‘™ƒ"] = ".",
    -- Om
    ["à¥"] = "oá¹ƒ"
}

function export.tr(text, lang, sc)
    text = mw.ustring.gsub(text, "([ğ‘˜ğ‘˜ğ‘˜ğ‘˜‘ğ‘˜’ğ‘˜“ğ‘˜”ğ‘˜•ğ‘˜–ğ‘˜—ğ‘˜˜ğ‘˜™ğ‘˜šğ‘˜›ğ‘˜œğ‘˜ğ‘˜ğ‘˜Ÿğ‘˜ ğ‘˜¡ğ‘˜¢ğ‘˜£ğ‘˜¤ğ‘˜¥ğ‘˜¦ğ‘˜§ğ‘˜¨ğ‘˜©ğ‘˜ªğ‘˜¯ğ‘˜«ğ‘˜¬ğ‘˜­ğ‘˜®])" .. "([ğ‘˜°ğ‘˜±ğ‘˜²ğ‘˜³ğ‘˜´ğ‘˜µğ‘˜¶ğ‘˜·ğ‘˜¸ğ‘˜¹ğ‘˜ºğ‘˜»ğ‘˜¼ğ‘˜¿]?)", function(c, d)
        if d == "" then
            return consonants[c] .. "a"
        else
            return consonants[c] .. diacritics[d]
        end
    end)

    text = mw.ustring.gsub(text, ".[ğ‘™€]?", tt)

    return text
end

return export
