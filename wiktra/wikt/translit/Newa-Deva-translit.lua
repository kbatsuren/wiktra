local export = {}
local U = mw.ustring.char
local gsub = mw.ustring.gsub
local match = mw.ustring.match
local sub = mw.ustring.sub

local conv = {
    ["ЁСРО"] = "рдХ",
    ["ЁСРП"] = "рдЦ",
    ["ЁСРР"] = "рдЧ",
    ["ЁСРС"] = "рдШ",
    ["ЁСРТ"] = "рдЩ",
    ["ЁСРФ"] = "рдЪ",
    ["ЁСРХ"] = "рдЫ",
    ["ЁСРЦ"] = "рдЬ",
    ["ЁСРЧ"] = "рдЭ",
    ["ЁСРШ"] = "рдЮ",
    ["ЁСРЪ"] = "рдЯ",
    ["ЁСРЫ"] = "рда",
    ["ЁСРЬ"] = "рдб",
    ["ЁСРЭ"] = "рдв",
    ["ЁСРЮ"] = "рдг",
    ["ЁСРЯ"] = "рдд",
    ["ЁСРа"] = "рде",
    ["ЁСРб"] = "рдж",
    ["ЁСРв"] = "рдз",
    ["ЁСРг"] = "рди",
    ["ЁСРе"] = "рдк",
    ["ЁСРж"] = "рдл",
    ["ЁСРз"] = "рдм",
    ["ЁСРи"] = "рдн",
    ["ЁСРй"] = "рдо",
    ["ЁСРл"] = "рдп",
    ["ЁСРм"] = "рд░",
    ["ЁСРо"] = "рд▓",
    ["ЁСР░"] = "рд╡",
    ["ЁСР▒"] = "рд╢",
    ["ЁСР▓"] = "рд╖",
    ["ЁСР│"] = "рд╕",
    ["ЁСР┤"] = "рд╣",

    -- breathy
    ["ЁСРд"] = "рдиреНрд╣",
    ["ЁСРУ"] = "рдЩреНрд╣",
    ["ЁСРн"] = "рд░реНрд╣",
    ["ЁСРп"] = "рд▓реНрд╣",
    ["ЁСРк"] = "рдореНрд╣",
    ["ЁСРЩ"] = "рдЮреНрд╣",

    ["ЁСР╡"] = "рд╛",
    ["ЁСР╢"] = "рд┐",
    ["ЁСР╖"] = "реА",
    ["ЁСР╕"] = "реБ",
    ["ЁСР╣"] = "реВ",
    ["ЁСР║"] = "реГ",
    ["ЁСР╗"] = "реД",
    ["ЁСР╝"] = "рев",
    ["ЁСР╜"] = "рег",
    ["ЁСР╛"] = "реЗ",
    ["ЁСР┐"] = "реИ",
    ["ЁССА"] = "реЛ",
    ["ЁССБ"] = "реМ",
    ["ЁССВ"] = "реН",
    ["ЁССЖ"] = "рд╝",

    -- vowels
    ["ЁСРА"] = "рдЕ",
    ["ЁСРБ"] = "рдЖ",
    ["ЁСРВ"] = "рдЗ",
    ["ЁСРГ"] = "рдИ",
    ["ЁСРД"] = "рдЙ",
    ["ЁСРЕ"] = "рдК",
    ["ЁСРЖ"] = "рдЛ",
    ["ЁСРЗ"] = "реа",
    ["ЁСРИ"] = "рдМ",
    ["ЁСРЙ"] = "реб",
    ["ЁСРК"] = "рдП",
    ["ЁСРЛ"] = "рдР",
    ["ЁСРМ"] = "рдУ",
    ["ЁСРН"] = "рдФ",
    -- chandrabindu    
    ["ЁССГ"] = "рдБ",
    -- anusvara    
    ["ЁССД"] = "рдВ",
    ["ЁССИ"] = "рдВ",
    -- visarga    
    ["ЁССЕ"] = "рдГ",
    -- avagraha
    ["ЁССЗ"] = "рд╜",
    -- punctuation
    ["ЁССП"] = "ре░",
    ["ЁССМ"] = "рее",
    ["ЁССЛ"] = "ред",
    ["ЁССЙ"] = "реР",
    -- Vedic extensions
    ["ЁССа"] = "с│╡",
    ["ЁССб"] = "с│╢",

    ["ЁССР"] = "реж",
    ["ЁССС"] = "рез",
    ["ЁССТ"] = "реи",
    ["ЁССУ"] = "рей",
    ["ЁССФ"] = "рек",
    ["ЁССХ"] = "рел",
    ["ЁССЦ"] = "рем",
    ["ЁССЧ"] = "рен",
    ["ЁССШ"] = "рео",
    ["ЁССЩ"] = "реп"
}

function export.tr(text, lang, sc)
    text = mw.ustring.gsub(text, ".", function(c) return conv[c] end)
    return text
end

return export
