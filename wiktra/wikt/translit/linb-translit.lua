local export = {}

local chars = {
    ["ğ€€"] = "a",
    ["ğ€"] = "e",
    ["ğ€‚"] = "i",
    ["ğ€ƒ"] = "o",
    ["ğ€„"] = "u",

    ["ğ€…"] = "da",
    ["ğ€†"] = "de",
    ["ğ€‡"] = "di",
    ["ğ€ˆ"] = "do",
    ["ğ€‰"] = "du",

    ["ğ€Š"] = "ja",
    ["ğ€‹"] = "je",
    -- ji not in Unicode
    ["ğ€"] = "jo",
    ["ğ€"] = "ju",

    ["ğ€"] = "ka",
    ["ğ€"] = "ke",
    ["ğ€‘"] = "ki",
    ["ğ€’"] = "ko",
    ["ğ€“"] = "ku",

    ["ğ€”"] = "ma",
    ["ğ€•"] = "me",
    ["ğ€–"] = "mi",
    ["ğ€—"] = "mo",
    ["ğ€˜"] = "mu",

    ["ğ€™"] = "na",
    ["ğ€š"] = "ne",
    ["ğ€›"] = "ni",
    ["ğ€œ"] = "no",
    ["ğ€"] = "nu",

    ["ğ€"] = "pa",
    ["ğ€Ÿ"] = "pe",
    ["ğ€ "] = "pi",
    ["ğ€¡"] = "po",
    ["ğ€¢"] = "pu",

    ["ğ€£"] = "qa",
    ["ğ€¤"] = "qe",
    ["ğ€¥"] = "qi",
    ["ğ€¦"] = "qo",
    -- qu not in Unicode

    ["ğ€¨"] = "ra",
    ["ğ€©"] = "re",
    ["ğ€ª"] = "ri",
    ["ğ€«"] = "ro",
    ["ğ€¬"] = "ru",

    ["ğ€­"] = "sa",
    ["ğ€®"] = "se",
    ["ğ€¯"] = "si",
    ["ğ€°"] = "so",
    ["ğ€±"] = "su",

    ["ğ€²"] = "ta",
    ["ğ€³"] = "te",
    ["ğ€´"] = "ti",
    ["ğ€µ"] = "to",
    ["ğ€¶"] = "tu",

    ["ğ€·"] = "wa",
    ["ğ€¸"] = "we",
    ["ğ€¹"] = "wi",
    ["ğ€º"] = "wo",
    -- wu not in Unicode

    ["ğ€¼"] = "za",
    ["ğ€½"] = "ze",
    -- zi not in Unicode
    ["ğ€¿"] = "zo",
    -- zu not in Unicode

    ["ğ€"] = "ha",
    ["ğ"] = "ai",
    ["ğ‚"] = "au",
    ["ğƒ"] = "dwe",
    ["ğ„"] = "dwo",
    ["ğ…"] = "nwo",
    ["ğ†"] = "phu",
    ["ğ‡"] = "pte",
    ["ğˆ"] = "rya",
    ["ğ‰"] = "rai",
    ["ğŠ"] = "ryo",
    ["ğ‹"] = "tya",
    ["ğŒ"] = "twe",
    ["ğ"] = "two",

    ["ğ"] = "*18",
    ["ğ‘"] = "*19",
    ["ğ’"] = "*22",
    ["ğ“"] = "*34",
    ["ğ”"] = "*47",
    ["ğ•"] = "*49",
    ["ğ–"] = "*56",
    ["ğ—"] = "*63",
    ["ğ˜"] = "*64",
    ["ğ™"] = "*79",
    ["ğš"] = "*82",
    ["ğ›"] = "*83",
    ["ğœ"] = "*86",
    ["ğ"] = "*89",

    -- explicit morpheme boundary
    ["-"] = "`"
}

function export.tr(text, lang, sc)
    local ret = {}
    local i = 1

    for c in string.gmatch(text, "[%z\1-\127\194-\244][\128-\191]*") do -- UTF-8 character pattern
        ret[i] = chars[c] or c
        i = i + 1
    end

    text = string.gsub(table.concat(ret, "-"), "%- %-", " ")
    text = string.gsub(text, "%-?`%-?", "-")

    return text
end

return export
